function Curve(t,e){let i;this.c="white",this.isAlive=!0,this.isYoung=!0,this.isStatic=!0,this.done=!1;const n=t.x,s=t.y,o=e.x,r=e.y,a=t.x+100,h=t.y-300,c=e.x-100,d=e.y-300;this.render=(()=>{i.beginPath(),i.moveTo(n,s),i.bezierCurveTo(a,h,c,d,o,r),i.strokeStyle=this.c,i.stroke()}),this.setContext=(t=>{i=t}),this.getDots=(t=>t.map(({normTime:t})=>getBezierXY(t,n,s,a,h,c,d,o,r)))}function getBezierXY(t,e,i,n,s,o,r,a,h){return{x:Math.pow(1-t,3)*e+3*t*Math.pow(1-t,2)*n+3*t*t*(1-t)*o+t*t*t*a,y:Math.pow(1-t,3)*i+3*t*Math.pow(1-t,2)*s+3*t*t*(1-t)*r+t*t*t*h}}function Dot(t,e,i,n,s){let o;this.x=t,this.y=e,this.r=i,this.c=n,this.t=s,this.isAlive=!0,this.isYoung=!0,this.isStatic=!0,this.done=!1;const r=2*Math.PI;this.render=(()=>{this.isAlive&&(o.fillStyle=this.c,o.beginPath(),o.arc(this.x,this.y,this.r,0,r),o.fill())}),this.contains=((t,e)=>{const i=Math.abs(this.x-t)<this.r&&Math.abs(this.y-e)<this.r;return this.c=i?"green":n,i}),this.setContext=(t=>{o=t}),this.update=(()=>{}),this.intersects=(t=>{if(this.done)return!1;return function(t,e){return Math.hypot(t.x-e.x,t.y-e.y)}(this,t)<this.r+t.r})}function Drawing(){let t,e=[];this.render=(()=>{e.forEach(t=>t.render())}),this.add=(i=>{i.setContext(t),e.push(i)}),this.setContext=(e=>{t=e}),this.getNormTimeline=(()=>{const t=e.map(t=>1e3*t.t),i=new Float32Array(t),n=i[0],s=i.map(t=>t-n),o=s[s.length-1];return s.map(t=>t/o)}),this.setNormTimeline=(()=>{const t=e.map(t=>1e3*t.t),i=new Float32Array(t),n=i[0],s=i.map(t=>t-n),o=s[s.length-1],r=s.map(t=>t/o);e.forEach((t,e)=>t.normTime=r[e])}),this.getDots=(()=>e),this.reset=(()=>{e=[]})}const world=new World,start=new Dot(200,400,10,"white"),finish=new Dot(600,400,10,"white"),curve=new Curve(start,finish),drawing=new Drawing,ctx=world.getContext(),canvas=ctx.canvas;let isDrawing;function init(){world.reset(),drawing.reset(),world.add(curve),world.add(start),world.add(finish),world.add(drawing)}function onMouseDown(t){start.contains(t.pageX,t.pageY)&&(isDrawing=!0)}function onMouseUp(t){if(isDrawing=!1,finish.contains(t.pageX,t.pageY)){drawing.setNormTimeline();const t=drawing.getDots();compare(t,curve.getDots(t))}}function compare(t,e){const i=t.reduce((t,{x:i,y:n},s)=>{return t+=(Math.abs(i-e[s].x)/e[s].x*100+Math.abs(n-e[s].y)/e[s].y*100)/2},0);console.log(i/t.length)}function onMouseMove(t){if(isDrawing){const e=new Dot(t.pageX,t.pageY,2,"red",t.timeStamp);drawing.add(e)}}function World(){const t=document.querySelector("canvas"),e=t.getContext("2d"),i=.3;let n=[],s=[],o=!0;const r={w:window.innerWidth,h:window.innerHeight},a=[];let h=performance.now(),c=0;function d(r){if(c>3)return;r-h>i&&(h=r,e.clearRect(0,0,t.width,t.height),n.forEach(t=>t.render()),s.forEach(t=>t.render()),function(){const t=n.length;a.forEach(e=>e(t))}()),o&&c++,requestAnimationFrame(d)}function w(t,e){return Math.floor(Math.random()*(e-t+1)+t)}t.width=r.w,t.height=r.h,e.textAlign="center",e.textBaseline="middle",this.centerX=r.w/2,this.centerY=r.h/2,this.width=r.w,this.height=r.h,this.getContext=(()=>e),this.add=(t=>{t.setContext(e),t.isStatic?s.push(t):n.push(t)}),this.stop=(()=>{o=!0}),this.isStopped=(()=>o),this.reset=(()=>{o=!1,n=[],s=[],h=performance.now(),c=0,d(h)}),this.addCallback=(t=>{a.push(t)}),this.spawn=(t=>{const i=function(){let t,e,i,n;switch(w(0,3)){case 0:t=w(0,r.w),e=0,i=w(-5,5),n=w(-5,-1);break;case 1:t=r.w,e=w(0,r.h),i=w(1,5),n=w(-5,5);break;case 2:t=w(0,r.w),e=r.h,i=w(-5,5),n=w(1,5);break;case 3:t=0,e=w(0,r.h),i=w(-5,-1),n=w(-5,5)}return{x:t,y:e,vy:n,vx:i}}();i.ctx=e,i.bounds=r,t.setData(i),this.add(t)})}canvas.addEventListener("mousedown",onMouseDown),canvas.addEventListener("mouseup",onMouseUp),canvas.addEventListener("mousemove",onMouseMove),window.onkeyup=(t=>{" "===t.key&&(console.log(),init())}),init();
//# sourceMappingURL=g.js.map
